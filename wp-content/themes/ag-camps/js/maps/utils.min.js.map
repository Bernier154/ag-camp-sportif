{"version":3,"sources":["utils.js"],"names":["validateEmail","email","test","isMobile","navigator","userAgent","substr","window","innerWidth","cdmConf","mobile_width","CustomEvent","event","params","bubbles","cancelable","detail","undefined","evt","document","createEvent","initCustomEvent","prototype","Event","$","parallaxAnimationFrame","parallaxObject","win","image","removeClass","section","isOnScreen","visiblePart","parseInt","css","maxScroll","height","sectionScroll","scrollTop","offset","top","centPourcent","outerHeight","vitesse","requestAnimationFrame","fn","viewport","left","scrollLeft","right","width","bottom","bounds","this","outerWidth","calculateViewBox","svg","viewboxWidth","viewboxHeight","find","each","bbox","getBBox","endX","x","endY","y","attr","parallax","zIndex","length","console","log","addClass","appendTo","append","checkAnimations","hasClass","index","el","elem_class","pos","search","anim_name","substring","indexOf","setTimeout","animateCSS","replace","dispatchEvent","MutationObserver","mutations","forEach","mutation","type","addedNodes","observe","childList","subtree","on","jQuery","element","animation","prefix","arguments","Promise","resolve","reject","animationName","concat","Element","HTMLDocument","querySelector","classList","add","addEventListener","remove","once"],"mappings":"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","file":"../utils.min.js","sourcesContent":["/**\r\n * Polyfill CustomEvent pour IE.\r\n */\r\n(function(){\r\n    if ( typeof window.CustomEvent === \"function\" ) return false;\r\n  \r\n    function CustomEvent ( event, params ) {\r\n      params = params || { bubbles: false, cancelable: false, detail: undefined };\r\n      var evt = document.createEvent( 'CustomEvent' );\r\n      evt.initCustomEvent( event, params.bubbles, params.cancelable, params.detail );\r\n      return evt;\r\n     }\r\n  \r\n    CustomEvent.prototype = window.Event.prototype;\r\n  \r\n    window.CustomEvent = CustomEvent;\r\n})();\r\n\r\n// validation\r\nfunction validateEmail(email) { \r\n\tvar re = /^(([^<>()[\\]\\\\.,;:\\s@\\\"]+(\\.[^<>()[\\]\\\\.,;:\\s@\\\"]+)*)|(\\\".+\\\"))@((\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\])|(([a-zA-Z\\-0-9]+\\.)+[a-zA-Z]{2,}))$/; // TODO: ne pas accepter un IP \r\n\treturn re.test(email);\r\n}\r\n\r\nfunction isMobile(){\r\n\tif(/(android|bb\\d+|meego).+mobile|avantgo|bada\\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|ipad|iris|kindle|Android|Silk|lge |maemo|midp|mmp|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino/i.test(navigator.userAgent) || /1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\\-(n|u)|c55\\/|capi|ccwa|cdm\\-|cell|chtm|cldc|cmd\\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\\-s|devi|dica|dmob|do(c|p)o|ds(12|\\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\\-|_)|g1 u|g560|gene|gf\\-5|g\\-mo|go(\\.w|od)|gr(ad|un)|haie|hcit|hd\\-(m|p|t)|hei\\-|hi(pt|ta)|hp( i|ip)|hs\\-c|ht(c(\\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\\-(20|go|ma)|i230|iac( |\\-|\\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\\/)|klon|kpt |kwc\\-|kyo(c|k)|le(no|xi)|lg( g|\\/(k|l|u)|50|54|\\-[a-w])|libw|lynx|m1\\-w|m3ga|m50\\/|ma(te|ui|xo)|mc(01|21|ca)|m\\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\\-2|po(ck|rt|se)|prox|psio|pt\\-g|qa\\-a|qc(07|12|21|32|60|\\-[2-7]|i\\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\\-|oo|p\\-)|sdk\\/|se(c(\\-|0|1)|47|mc|nd|ri)|sgh\\-|shar|sie(\\-|m)|sk\\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\\-|v\\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\\-|tdg\\-|tel(i|m)|tim\\-|t\\-mo|to(pl|sh)|ts(70|m\\-|m3|m5)|tx\\-9|up(\\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\\-|your|zeto|zte\\-/i.test(navigator.userAgent.substr(0,4)) || window.innerWidth <= cdmConf.mobile_width){ return true;}else{return false;}\r\n}\r\n\r\n\r\n(function($){\r\n\t/* function requise pour le parallax\r\n\t* détecte si un élément est afficher sur l'écran\r\n\t* Return bool\r\n\t*/\r\n\t$.fn.isOnScreen = function(){\r\n\r\n\t\tvar win = $(window);\r\n\r\n\t\tvar viewport = {\r\n\t\t\ttop : win.scrollTop(),\r\n\t\t\tleft : win.scrollLeft()\r\n\t\t};\r\n\t\tviewport.right = viewport.left + win.width();\r\n\t\tviewport.bottom = viewport.top + win.height();\r\n\r\n\t\tvar bounds = this.offset();\r\n\t\tbounds.right = bounds.left + this.outerWidth();\r\n\t\tbounds.bottom = bounds.top + this.outerHeight();\r\n\r\n\t\treturn (!(viewport.right < bounds.left || viewport.left > bounds.right || viewport.bottom < bounds.top || viewport.top > bounds.bottom));\r\n\r\n\t};\r\n\r\n\t/**\r\n\t * Calcule les dimensions du viewBox d'un SVG avec les path visibles.\r\n\t * @param {Node} svg \r\n\t */\r\n\t$.fn.calculateViewBox = function(svg){\r\n\t\tvar viewboxWidth = 0;\r\n\t\tvar viewboxHeight = 0;\r\n\r\n\t\t$(svg).find('path:visible').each(function(){\r\n\t\t\tvar bbox = this.getBBox();\r\n\t\t\tvar endX = bbox.x + bbox.width;\r\n\t\t\tvar endY = bbox.y + bbox.height;\r\n\r\n\t\t\tif(endX > viewboxWidth){\r\n\t\t\t\tviewboxWidth = endX;\r\n\t\t\t}\r\n\r\n\t\t\tif(endY > viewboxHeight){\r\n\t\t\t\tviewboxHeight = endY;\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\t$(svg).attr('viewBox', '0 0 '+ viewboxWidth + ' ' + viewboxHeight);\r\n\t}\r\n\r\n\t/**\r\n\t * Rajoute du parallax a un élément\r\n\t * On doit déjà avoir un element dans le div qui est l'image\r\n\t *\r\n\t * @param section Le div qui va contenir le parallax\r\n\t * @param {int} [vitesse=0] La vitesse de défilement. Plus le chiffre est grand, mois la vitesse est grande, 0 = automatique\r\n\t * @param {int} [zIndex=-1] z-index de l'image\r\n\t * @return void\r\n\t */\r\n\t$.fn.parallax = function(section, vitesse, zIndex){\r\n\t\timage = this; // image to animation\r\n\t\tsection = $(section); // section to animate the image\r\n\r\n\t\tif(section.length == 0){\r\n\t\t\tconsole.log(\"la section pour le parallax n'existe pas\");\r\n\t\t}\r\n\r\n\t\tif(image.length == 0){\r\n\t\t\treturn false;\r\n\t\t}\r\n\t\t\r\n\t\tvitesse = (typeof vitesse === 'undefined') ? 3 : vitesse; // réduction de la vitesse du parallax\r\n\t\tzIndex = (typeof zIndex === 'undefined') ? -1 : zIndex; // zIndex de -1 par default\r\n\t\t\r\n\t\t\r\n\t\timage.addClass('img-parallax');\r\n\t\tsection.addClass('section-parallax');\r\n\t\t\r\n\t\t// ajoute une wrapper pour l'image a l'intérieur de la section pour la garder dans le flow\r\n\t\t$('<div class=\"parallax-img-wrapper\"></div>').appendTo(section).css('z-index', zIndex).append(image);\r\n\t\t\r\n\t\tvar parallaxObject = {\r\n\t\t\tvitesse: vitesse,\r\n\t\t\timage: image,\r\n\t\t\tsection: section\r\n\t\t};\r\n\t\t\r\n\t\tparallaxAnimationFrame(parallaxObject);\r\n\t}\r\n\r\n\tfunction parallaxAnimationFrame(parallaxObject){\r\n\t\twin = $(window);\r\n\r\n\t\tparallaxObject.image.removeClass('inactif'); // active le parallax\r\n\t\t\r\n\t\tif(parallaxObject.section.isOnScreen() === true){\r\n\t\t\tvar visiblePart = parseInt(parallaxObject.section.css('height')); // hauteur de la section = zone visible de l'image\r\n\t\t\tvar maxScroll = parallaxObject.image.height() - visiblePart; // hauteur d'extra de l'image\r\n\t\t\t\r\n\t\t\tvar sectionScroll = win.scrollTop() + win.height() - parallaxObject.section.offset().top; // sectionScroll est à 0 quand on commence a voir la section, est représente le nombre de pixels visibles\r\n\t\t\t\r\n\t\t\tcentPourcent = parallaxObject.section.outerHeight() + win.height();\r\n\t\t\t//console.log(sectionScroll/centPourcent +\"%\");\r\n\t\t\t\r\n\t\t\tif(parallaxObject.vitesse == 0){\r\n\t\t\t\t// sectionScroll/centPourcent = mon pourcentage, entre 0 et 1\r\n\t\t\t\tparallaxObject.image.css('top', ((parallaxObject.section.outerHeight() - parallaxObject.image.height()) * (sectionScroll/centPourcent)) );\r\n\t\t\t}else{\r\n\t\t\t\t// si l'image est visible au top, on la part de 0\r\n\t\t\t\tif(parallaxObject.section.offset().top < win.height()){\r\n\t\t\t\t\tsectionScroll = win.scrollTop()/parallaxObject.vitesse;\r\n\t\t\t\t}else{\r\n\t\t\t\t\tsectionScroll = sectionScroll/parallaxObject.vitesse;\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\tif(sectionScroll >= maxScroll){ // si on a atteint le scroll maximum on reste au max\r\n\t\t\t\t\tparallaxObject.image.css('top', maxScroll*-1);\r\n\t\t\t\t}else{\r\n\t\t\t\t\tparallaxObject.image.css('top', sectionScroll*-1);\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t}\r\n\t\t\t\r\n\t\t}\r\n\r\n\t\twindow.requestAnimationFrame(function(){\r\n\t\t\tparallaxAnimationFrame(parallaxObject);\r\n\t\t});\r\n\t}\r\n\r\n\t/*************/\r\n\t/* ANIMATION */\r\n\t/*************/\r\n\r\n\t// add class .toAnimate to html element with a animate.css effect class\r\n\t// when on screen, the animation will execute\r\n\tconst mutationConfig = {\r\n\t\tchildList: true,\r\n\t\tsubtree: true\r\n\t};\r\n\tvar newAnimationObserver = new MutationObserver(domNewContent);\r\n\tnewAnimationObserver.observe(document, mutationConfig);\r\n\t\r\n\tfunction domNewContent(mutations){\r\n\t\tmutations.forEach(function(mutation){\r\n\t\t\tif(mutation.type == 'childList'){\r\n\t\t\t\tlet addedNodes = mutation.addedNodes;\r\n\t\t\t\t\r\n\t\t\t\tif(addedNodes.length){ // Nouveau contenu ajouté\r\n\t\t\t\t\tcheckAnimations();\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}); \r\n\t}\r\n\r\n\t$(window).on('scroll load', function(event) {\r\n\t\tcheckAnimations();\r\n\t});\r\n\r\n\tfunction checkAnimations(){\r\n\t\tif(!$('html').hasClass('preload')){\r\n\t\t\trequestAnimationFrame(function() {\r\n\t\t\t\t$('.toAnimate').each(function(index, el) {\r\n\t\t\t\t\tif($(this).isOnScreen() === true){\r\n\t\t\t\t\t\tvar elem_class = $(this).attr('class');\r\n\t\t\t\t\t\tvar pos = elem_class.search('animate__');\r\n\r\n\t\t\t\t\t\tif(pos !== -1){\r\n\t\t\t\t\t\t\tvar anim_name = elem_class.substring(pos, elem_class.indexOf(\" \", pos) !== -1 ? elem_class.indexOf(\" \", pos) : elem_class.length);\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t$(this).removeClass(anim_name);\r\n\r\n\t\t\t\t\t\t\tsetTimeout(function(){\r\n\t\t\t\t\t\t\t\tanimateCSS(el, anim_name.replace('animate__', ''));\r\n\t\t\t\t\t\t\t\t$(el).removeClass('toAnimate');\r\n\t\t\t\t\t\t\t}, 500);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tthis.dispatchEvent(new CustomEvent('animated'));\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t});\r\n\t\t}\r\n\t}\r\n})(jQuery);\r\n\r\n/**\r\n * Fonction pour déclencher une animation.\r\n * \r\n * @param string|Element|HTMLDocument element Sélecteur sous forme de string ou un élément HTML.\r\n * @param string animation Le nom de l'animation.\r\n * @param string prefix Le prefix pour les animations (laissez valeur par défaut).\r\n */\r\nconst animateCSS = (element, animation, prefix = 'animate__') =>\r\n\t// We create a Promise and return it\r\n\tnew Promise((resolve, reject) => {\r\n\t\tconst animationName = `${prefix}${animation}`;\r\n\r\n\t\tif((element instanceof Element) === false && (element instanceof HTMLDocument) === false){\r\n\t\t\telement = document.querySelector(element);\r\n\t\t}\r\n\r\n\t\telement.classList.add(`${prefix}animated`, animationName);\r\n\r\n\t\t// When the animation ends, we clean the classes and resolve the Promise\r\n\t\tfunction handleAnimationEnd() {\r\n\t\t\telement.classList.remove(`${prefix}animated`, animationName);\r\n\t\t\tresolve('Animation ended');\r\n\t\t}\r\n\r\n\t\telement.addEventListener('animationend', handleAnimationEnd, {once: true});\r\n\t});"]}
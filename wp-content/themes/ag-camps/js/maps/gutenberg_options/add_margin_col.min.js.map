{"version":3,"sources":["gutenberg_options/add_margin_col.js"],"names":["addFilter","wp","hooks","__","i18n","registerBlockType","blocks","createHigherOrderComponent","compose","Fragment","element","InspectorControls","blockEditor","_wp$components","components","PanelBody","ToggleControl","addColMargin","props","name","attributes","Object","assign","specialColMargin","type","default","withSpecialColMargin","BlockEdit","React","createElement","label","checked","onChange","val","setAttributes","specialAddColMargin","saveElementProps","blockType","className"],"mappings":"AACA,IAEQA,UAAcC,GAAGC,MAAjBF,UACAG,GAAOF,GAAGG,KAAVD,GACAE,kBAAsBJ,GAAGK,OAAzBD,kBACAE,2BAA+BN,GAAGO,QAAlCD,2BACAE,SAAaR,GAAGS,QAAhBD,SACAE,kBAAsBV,GAAGW,YAAzBD,kBADJE,eAEgCZ,GAAGa,WAA/BC,UADQF,eACRE,UAAUC,cAAEH,eAAFG,cAMZC,aAAe,SAAEC,EAAOC,GAW7B,MATW,gBAARA,IAEFD,EAAME,WAAaC,OAAOC,OAAQJ,EAAME,WAAY,CACnDG,iBAAkB,CACjBC,KAAM,UACNC,SAAS,MAILP,GACNlB,UAAW,2BAA4B,sCAAuCiB,cAKhF,IAAMS,qBAAuBnB,4BAA4B,SAAEoB,GAC1D,OAAO,SAAET,GACR,MAAmB,gBAAdA,EAAMC,KAAqCS,MAAAC,cAACF,EAAeT,GAE/DU,MAAAC,cAACpB,SAAD,KACCmB,MAAAC,cAACF,EAAeT,GACJU,MAAAC,cAAClB,kBAAD,KACIiB,MAAAC,cAACd,UAAD,KACIa,MAAAC,cAACb,cAAD,CACIc,MAAM,oCACNC,QAAUb,EAAME,WAAWG,iBAC3BS,SAAW,SAACC,GACRf,EAAMgB,cAAc,CAACX,iBAAiBU,aAQnE,wBACHjC,UAAW,mBAAoB,+CAAgD0B,sBAE/E,IAAMS,oBAAqB,SAAEC,EAAkBC,EAAWjB,GAMzD,MAL0B,gBAAlBiB,EAAUlB,MACRC,EAAWG,kBACVF,OAAOC,OAAQc,EAAkB,CAAEE,UAAYF,EAAiBE,UAAjBF,yBAGnDA,GACNpC,UAAW,mCAAoC,2DAA4DmC","file":"../../gutenberg_options/add_margin_col.min.js","sourcesContent":["\r\n\r\n//importe le hook addfilter et la localisation\r\nconst { addFilter } = wp.hooks;\r\nconst { __ } = wp.i18n;\r\nconst { registerBlockType } = wp.blocks;\r\nconst { createHigherOrderComponent } = wp.compose;\r\nconst { Fragment } = wp.element;\r\nconst { InspectorControls } = wp.blockEditor;\r\nconst { PanelBody,ToggleControl } = wp.components;\r\n\r\n\r\n/**\r\n * Ajoute un props au block\r\n */\r\nconst addColMargin = ( props, name ) => {\r\n   \r\n\tif(name == 'core/columns'){\r\n\t\t// on ajoute l'attribut et on ajoute une valeur par dÃ©faut\r\n\t\tprops.attributes = Object.assign( props.attributes, {\r\n\t\t\tspecialColMargin: {\r\n\t\t\t\ttype: 'boolean',\r\n\t\t\t\tdefault: false,\r\n\t\t\t},\r\n\t\t} );\r\n\t}\r\n\treturn props;\r\n};addFilter( 'blocks.registerBlockType', 'addColMargin/attribute/addColMargin', addColMargin);\r\n/**\r\n * Ajoute un controle dans la sidebar pour le plugin \r\n *\r\n */\r\nconst withSpecialColMargin = createHigherOrderComponent( ( BlockEdit ) => {\r\n\treturn ( props ) => {\r\n\t\tif ( props.name != 'core/columns' ) { return  ( <BlockEdit { ...props } /> ) ; }\r\n\t\treturn (\r\n\t\t\t<Fragment>\r\n\t\t\t\t<BlockEdit { ...props }  />\r\n                <InspectorControls>\r\n                    <PanelBody>\r\n                        <ToggleControl\r\n                            label=\"Ajouter une marge pour 3 colonnes\"\r\n                            checked={ props.attributes.specialColMargin }\r\n                            onChange={ (val) => {\r\n                                props.setAttributes({specialColMargin:val})\r\n                            } }\r\n                        />\r\n                    </PanelBody>\r\n                </InspectorControls>\r\n\t\t\t</Fragment>\r\n\t\t);\r\n\t};\r\n}, 'withSpecialColMargin' );\r\naddFilter( 'editor.BlockEdit', 'withSpecialColMargin/with-special-col-margin', withSpecialColMargin );\r\n\r\nconst specialAddColMargin= ( saveElementProps, blockType, attributes ) => {\r\n    if ( blockType.name == 'core/columns' ) { \r\n        if(attributes.specialColMargin){\r\n            Object.assign( saveElementProps, { className:  saveElementProps.className + ' '+'cols-special-margin' } );\r\n        }\r\n    }\r\n\treturn saveElementProps;\r\n};addFilter( 'blocks.getSaveContent.extraProps', 'specialAddColMargin/get-save-content/specialAddColMargin', specialAddColMargin );\r\n\r\n\r\n\r\n"]}
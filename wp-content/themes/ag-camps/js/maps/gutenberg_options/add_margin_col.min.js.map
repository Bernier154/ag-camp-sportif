{"version":3,"sources":["gutenberg_options/add_margin_col.js"],"names":["addFilter","wp","hooks","__","i18n","registerBlockType","blocks","createHigherOrderComponent","compose","Fragment","element","InspectorControls","blockEditor","_wp$components","components","PanelBody","ToggleControl","addColMargin","props","name","attributes","type","Object","assign","default","withSpecialColMargin","BlockEdit","specialColMargin","val","label","checked","onChange","setAttributes","saveElementProps","specialAddColMargin","blockType","className"],"mappings":"AACA,IAKQA,UAAcC,GAAGC,MAAjBF,UAEAG,GAAOF,GAAGG,KAAVD,GAEAE,kBAAsBJ,GAAGK,OAAzBD,kBAEAE,2BAA+BN,GAAGO,QAAlCD,2BAEAE,SAAaR,GAAGS,QAAhBD,SAEAE,kBAAsBV,GAAGW,YAAzBD,kBATJE,eAWgCZ,GAAGa,WAA/BC,UAVQF,eAURE,UAAUC,cATEH,eASFG,cAkBhBC,aAAA,SAAAC,EAAAC,GATA,MAWMC,gBAANF,IAIEG,EAAAA,WAFiBC,OAAAC,OAAAL,EAAAE,WAAA,CAIjBI,iBAAS,CAJQH,KAAA,UAFnBG,SAAA,MAXON,GA8BTlB,UAAA,2BAAA,sCAAAiB,cAlBA,IAAIQ,qBAAuBlB,4BAA2B,SAAUmB,GA+B9D,OAAA,SAAAR,GAY0B,MAAM,gBAANA,EAAMC,KAEUC,MAAWO,cAAAA,EAJ/BT,GAQ6BS,MAAiBC,cAAAA,SAAAA,KAAAA,MAAAA,cAAAA,EAAAA,GAAAA,MAAAA,cAAAA,kBAAAA,KAAAA,MAAAA,cAAAA,UAAAA,KAAAA,MAAAA,cAAAA,cAAAA,CAAlBC,MAApB,oCAEHC,QAAAZ,EAAAE,WAAAO,iBAZTI,SARlB,SAAAH,GAJDV,EAAAc,cAAA,CAsCEL,iBAxCHC,aAkDQ,wBAEIN,UAAAA,mBAAeW,+CAAkBR,sBAAA,IAAAS,oBAAjC,SAAAD,EAAAE,EAAAf,GAjDV,MAmDO,gBAAAe,EAAAhB,MAEJC,EAAAO,kBA3DCL,OAAOC,OAAOU,EAAkB,CA6DrCG,UAAOH,EAAPG,UAAOH,yBAvDCA,GAGTjC,UAAU,mCAAoC,2DAA4DkC","file":"../../gutenberg_options/add_margin_col.min.js","sourcesContent":["\r\r\n\r\r\n//importe le hook addfilter et la localisation\r\r\nconst { addFilter } = wp.hooks;\r\r\nconst { __ } = wp.i18n;\r\r\nconst { registerBlockType } = wp.blocks;\r\r\nconst { createHigherOrderComponent } = wp.compose;\r\r\nconst { Fragment } = wp.element;\r\r\nconst { InspectorControls } = wp.blockEditor;\r\r\nconst { PanelBody,ToggleControl } = wp.components;\r\r\n\r\r\n\r\r\n/**\r\r\n * Ajoute un props au block\r\r\n */\r\r\nconst addColMargin = ( props, name ) => {\r\r\n   \r\r\n\tif(name == 'core/columns'){\r\r\n\t\t// on ajoute l'attribut et on ajoute une valeur par dÃ©faut\r\r\n\t\tprops.attributes = Object.assign( props.attributes, {\r\r\n\t\t\tspecialColMargin: {\r\r\n\t\t\t\ttype: 'boolean',\r\r\n\t\t\t\tdefault: false,\r\r\n\t\t\t},\r\r\n\t\t} );\r\r\n\t}\r\r\n\treturn props;\r\r\n};addFilter( 'blocks.registerBlockType', 'addColMargin/attribute/addColMargin', addColMargin);\r\r\n/**\r\r\n * Ajoute un controle dans la sidebar pour le plugin \r\r\n *\r\r\n */\r\r\nconst withSpecialColMargin = createHigherOrderComponent( ( BlockEdit ) => {\r\r\n\treturn ( props ) => {\r\r\n\t\tif ( props.name != 'core/columns' ) { return  ( <BlockEdit { ...props } /> ) ; }\r\r\n\t\treturn (\r\r\n\t\t\t<Fragment>\r\r\n\t\t\t\t<BlockEdit { ...props }  />\r\r\n                <InspectorControls>\r\r\n                    <PanelBody>\r\r\n                        <ToggleControl\r\r\n                            label=\"Ajouter une marge pour 3 colonnes\"\r\r\n                            checked={ props.attributes.specialColMargin }\r\r\n                            onChange={ (val) => {\r\r\n                                props.setAttributes({specialColMargin:val})\r\r\n                            } }\r\r\n                        />\r\r\n                    </PanelBody>\r\r\n                </InspectorControls>\r\r\n\t\t\t</Fragment>\r\r\n\t\t);\r\r\n\t};\r\r\n}, 'withSpecialColMargin' );\r\r\naddFilter( 'editor.BlockEdit', 'withSpecialColMargin/with-special-col-margin', withSpecialColMargin );\r\r\n\r\r\nconst specialAddColMargin= ( saveElementProps, blockType, attributes ) => {\r\r\n    if ( blockType.name == 'core/columns' ) { \r\r\n        if(attributes.specialColMargin){\r\r\n            Object.assign( saveElementProps, { className:  saveElementProps.className + ' '+'cols-special-margin' } );\r\r\n        }\r\r\n    }\r\r\n\treturn saveElementProps;\r\r\n};addFilter( 'blocks.getSaveContent.extraProps', 'specialAddColMargin/get-save-content/specialAddColMargin', specialAddColMargin );\r\r\n\r\r\n\r\r\n\r\r\n"]}